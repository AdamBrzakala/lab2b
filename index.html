<!DOCTYPE html>
<html>

<head>
    <meta charset="UTF-8">
    <link rel="stylesheet" href="style.css">
    <title>Lab01_poprawione</title>
</head>

<body>

    <form>
        <ol id="list">
            <li class="element" draggable="true" id="item">
                <button class="button">X</button>
                <label> email: </label>
                <input type="email" pattern="^.*@.*$" value="user@domain.com" /> <br />
            </li>
            <li class="element" draggable="true" id="item">
                <button class="button">X</button>
                <label> kod pocztowy: </label>
                <input type="text" pattern="^[0-9]{2}-[0-9]{3}$" value="98-062" /> <br />
            </li>
            <li class="element" draggable="true" id="item">
                <button class="button">X</button>
                <label> NIP: </label>
                <input type="text" pattern="^[0-9]{3}-[0-9]{2}-[0-9]{2}-[0-9]{3}" value="123-45-67-819" /> <br />
            </li>
            <li class="element" draggable="true" id="item">
                <button class="button">X</button>
                <label> nr dowodu: </label>
                <input type="text" pattern="^[A-Z]{3} [0-9]{6}" value="ABC 123456" /> <br />
            </li>
            <li class="element" draggable="true" id="item">
                <button class="button">X</button>
                <label> ipv4: </label>
                <input type="text" pattern="^[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}$" value="212.191.92.104" />
                <br />
            </li>
            <li class="element" draggable="true" id="item">
                <button class="button">X</button>
                <label> strona www: </label>
                <input type="url" value="https://adambrzakala.github.io" /> <br />
            </li>
            <li class="element" draggable="true" id="item">
                <button class="button">X</button>
                <label> ścieżka na dysku (małe litery): </label>
                <input type="text" pattern="^[A-Za-z]:\\[a-z\\]*" value="C:\windows\temp" /> <br />
            </li>
            <li class="element" draggable="true" id="item">
                <button class="button">X</button>
                <label> ścieżka na dysku (dowolne litery): </label>
                <input type="text" pattern="^[A-Z]:\\.*" value="C:\WinDows\Temp" /> <br />
            </li>
            <li class="element" draggable="true" id="item">
                <button class="button">X</button>
                <label> ścieżka w /etc: </label>
                <input type="text" pattern="^/etc/.*" value="/etc/passwd" /> <br />
            </li>
            <li class="element" draggable="true" id="item">
                <button class="button">X</button>
                <label> adres ipv6: </label>
                <input type="text"
                    pattern="^[a-z0-9]{4}:[a-z0-9]{4}:[a-z0-9]{4}:[a-z0-9]{4}:[a-z0-9]{4}:[a-z0-9]{4}:[a-z0-9]{4}:[a-z0-9]{4}"
                    value="2001:0db8:3c4d:0015:0000:0000:1a2f:1a2b" /> <br />
            </li>
            <li class="element" draggable="true" id="item">
                <button class="button">X</button>
                <label> nr telefonu: </label>
                <input type="tel" pattern="^[0-9]{3} ?[0-9]{3} ?[0-9]{3}" value="888 888 888" /> <br />
            </li>
        </ol>
        <input type="submit" value="Ok" class="submitButton" />
    </form>
    <script>
        var dragging = null;
        var list = document.getElementById('list');
        var border_style = 'solid 2px red';

        list.addEventListener('click', function (e) {
            if (e.target && e.target.nodeName == "BUTTON") {
                e.target.parentNode.remove();
            }
        });

        document.addEventListener('dragstart', function (event) {
            var target = getLI(event.target);
            dragging = target;
        });

        //WHEN DRAGGING CREATE BORDER
        document.addEventListener('dragover', function (event) {
            event.preventDefault();
            var target = getLI(event.target);
            var bounding = target.getBoundingClientRect();
            var offset = bounding.y + (bounding.height / 2);
            if (event.clientY - offset > 0) {
                target.style['border-top'] = '';
                target.style['border-bottom'] = border_style;
            } else {
                target.style['border-top'] = border_style;
                target.style['border-bottom'] = '';
            }
        });

        //WHEN DRAGGING DONE DELETE BORDER
        document.addEventListener('dragleave', function (event) {
            var target = getLI(event.target);
            target.style['border-bottom'] = '';
            target.style['border-top'] = '';
        });

        //WHEN DROP CHECK LIST, WHEN ITEM SHOULD BE INSERTED
        document.addEventListener('drop', function (event) {
            event.preventDefault();
            var target = getLI(event.target);
            if (target.style['border-bottom'] !== '') {
                target.style['border-bottom'] = '';
                target.parentNode.insertBefore(dragging, event.target.nextSibling);
            } else {
                target.style['border-top'] = '';
                target.parentNode.insertBefore(dragging, event.target);
            }
        });

        //FUNCTION RETURNING TARGET (LI ITEM)
        function getLI(target) {
            while (target.nodeName != 'LI' && target.nodeName != 'BODY') target = target.parentNode;
            if (target.nodeName == 'BODY') return false;
            return target;
        }

    </script>
</body>

</html>